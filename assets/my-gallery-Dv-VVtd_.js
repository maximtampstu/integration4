import{w as b}from"./with-props-BUJaXTv7.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{d as E,f as k,h as V,i as H,j as A}from"./art-DyO3Qdz8.js";import{b as L,c as D,a as I}from"./events-WvNoFEeU.js";import{a as N,L as c,v as M}from"./chunk-DQRVZFIR-CGfc0zaK.js";import{a as P}from"./users-DSFd2Dqv.js";import{g as T}from"./gallery_page_image-797W7FJb.js";import"./supabase-C7s_kt8r.js";const Z="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19%204H15.5L14.5%203H9.5L8.5%204H5V6H19M6%2019C6%2019.5304%206.21071%2020.0391%206.58579%2020.4142C6.96086%2020.7893%207.46957%2021%208%2021H16C16.5304%2021%2017.0391%2020.7893%2017.4142%2020.4142C17.7893%2020.0391%2018%2019.5304%2018%2019V7H6V19Z'%20fill='black'/%3e%3c/svg%3e",F="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3%2021V16.75L16.2%203.575C16.4%203.39167%2016.621%203.25%2016.863%203.15C17.105%203.05%2017.359%203%2017.625%203C17.891%203%2018.1493%203.05%2018.4%203.15C18.6507%203.25%2018.8673%203.4%2019.05%203.6L20.425%205C20.625%205.18333%2020.771%205.4%2020.863%205.65C20.955%205.9%2021.0007%206.15%2021%206.4C21%206.66667%2020.9543%206.921%2020.863%207.163C20.7717%207.405%2020.6257%207.62567%2020.425%207.825L7.25%2021H3ZM17.6%207.8L19%206.4L17.6%205L16.2%206.4L17.6%207.8Z'%20fill='black'/%3e%3c/svg%3e";async function G(){const d=await L(),a=await P(),o=await E(a.id),n=await k(a.id),t=await V(),m=await D(),p=await H(d.id,a.id),l=await A(d.id,a.id);return{currentEventArt:p,previousEventsArt:l,currentUser:a,totalVotes:o,artCount:n,currentEvent:d,allArtTypes:t,pastEvents:m}}const z=b(function({loaderData:a}){const{currentEventArt:o,previousEventsArt:n,currentUser:t,totalVotes:m,artCount:p,currentEvent:l,allArtTypes:g,pastEvents:f}=a;console.log(f,n);const[h,_]=N.useState(!1),[w,y]=N.useState(""),C=s=>{s.preventDefault(),y(s.target.artId.value),_(!0)};return N.useEffect(()=>{document.body.style.overflow=h?"hidden":""},[h]),e.jsxs("main",{className:"current-event",children:[e.jsx("h1",{className:"visually-hidden",children:"Current Event Artworks"}),e.jsxs("article",{className:"current-event__intro",children:[e.jsx("h2",{className:"current-event__headline",style:{backgroundImage:`url(${T})`,backgroundPosition:"bottom",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"my gallery"}),e.jsx("p",{className:"current-event__subtext",children:"Your submissions, status chips and quick actions - all in one place."})]}),e.jsxs("article",{className:"current-event__profile",children:[e.jsx("h2",{className:"visually-hidden",children:"User Info"}),e.jsxs("section",{className:"current-event__user",children:[e.jsx("h3",{}),e.jsx("div",{className:"current-event__avatar",children:(t==null?void 0:t.avatar)===null?e.jsxs("svg",{className:"current-event__avatar-placeholder",width:"24",height:"45",viewBox:"0 0 24 45",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{"clip-path":"url(#clip0_828_2413)",children:[e.jsx("path",{d:"M14.5497 8.80082C14.5497 7.25126 13.2935 5.99508 11.7439 5.99507C10.1944 5.99507 8.93818 7.25124 8.93818 8.80082V9.19675H3.00293V8.80082C3.00293 3.97331 6.91643 0.0598145 11.7439 0.0598145C16.5714 0.0598262 20.4849 3.9733 20.4849 8.80082V9.19675H14.5497V8.80082Z",fill:"#231F20"}),e.jsx("path",{d:"M3.00293 8.86553V8.4696H8.93818V8.86553C8.9382 10.4151 10.1944 11.6713 11.7439 11.6713C13.2935 11.6713 14.5497 10.415 14.5497 8.86553V8.4696H20.4849V8.86553C20.4849 13.693 16.5714 17.6065 11.7439 17.6065C6.91644 17.6065 3.00295 13.693 3.00293 8.86553Z",fill:"#231F20"}),e.jsx("path",{d:"M18.0395 37.1339H5.7373V44.9037H18.0395V37.1339Z",fill:"#231F20"}),e.jsx("path",{d:"M23.3276 44.9037H15.748L10.8633 18.5237H15.2338L23.3276 44.9037Z",fill:"#231F20"}),e.jsx("path",{d:"M0.179688 44.9037H7.75937L12.644 18.5237H8.27352L0.179688 44.9037Z",fill:"#231F20"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_828_2413",children:e.jsx("rect",{width:"23.5252",height:"45",fill:"white"})})})]}):e.jsx("img",{className:"current-event__avatar-img",src:t==null?void 0:t.avatar,alt:`avatar of ${t==null?void 0:t.username}`})}),e.jsxs("section",{className:"current-event__user-info",children:[e.jsx("h4",{className:"visually-hidden",children:"User Profile"}),e.jsxs("div",{className:"current-event__username-box",children:[e.jsxs("p",{className:"current-event__username",children:["@",t.username]}),e.jsx(c,{to:"/",className:"current-event__edit-link",children:"edit profile"})]}),e.jsxs("div",{className:"current-event__stats",children:[e.jsxs("div",{className:"current-event__stat",children:["active uploads ",e.jsx("p",{children:p})]}),e.jsxs("div",{className:"current-event__stat",children:["total votes ",e.jsx("p",{children:m})]})]})]})]})]}),e.jsxs("section",{className:"current-event__uploads",children:[e.jsx("h3",{className:"current-event__uploads-title",children:"uploaded items"}),e.jsxs("div",{className:"current-event__uploads-wrapper",children:[e.jsxs("section",{className:"current-event__upload-section",children:[e.jsx("h5",{className:"current-event__section-title",children:"current Event"}),o.length>0?o.map(s=>{var i,r;const v=(i=s==null?void 0:s.url)==null?void 0:i.endsWith(".mp3"),x=(s==null?void 0:s.type)==="video";return e.jsxs("div",{className:"art-card",children:[e.jsxs("div",{className:"art-card__info",children:[e.jsx("p",{className:"art-card__event-name",children:l.name}),e.jsx("p",{className:"art-card__type",children:(r=g.find(u=>u.id===s.artTypeId))==null?void 0:r.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"art-card__media",children:v?e.jsx("audio",{controls:!0,children:e.jsx("source",{src:s.url,type:"audio/mpeg"})}):x?e.jsx("video",{controls:!0,width:"100%",children:e.jsx("source",{src:s.url,type:"video/mp4"})}):e.jsx("img",{src:s.url,alt:s.title,width:"300"})}),e.jsxs("div",{className:"art-card__details",children:[e.jsxs("div",{className:"art-card__details-info",children:[e.jsx("p",{className:"art-card__title",children:s.title}),e.jsx("p",{className:"art-card__description",children:s.description})]}),e.jsxs("div",{className:"art-card__actions",children:[e.jsx("div",{className:"art-card__actions-detailButton",children:e.jsx(c,{to:`/art-detail/${s.id}`,className:"art-card__link",children:"Detail"})}),e.jsxs("div",{className:"art-card__action-buttons",children:[e.jsxs("form",{onSubmit:C,className:"art-card__delete-form",children:[e.jsx("input",{type:"hidden",name:"artId",value:s.id}),e.jsx("button",{type:"submit",className:"art-card__delete-button",children:e.jsx("img",{src:Z,alt:"Delete"})})]}),e.jsx(c,{to:`/edit-art/${s.id}`,className:"art-card__edit-button",children:e.jsx("img",{src:F,alt:"Edit"})})]})]})]})]})]},s.id)}):e.jsxs("div",{className:"current-event__empty",children:[e.jsxs("p",{children:["This space is waiting for your vision! Upload your piece before ",I(l.startDate)," to take part in the ",l.name," cycle."]}),e.jsx(c,{to:"/upload-list",className:"current-event__upload-link",children:"upload"})]})]}),e.jsxs("section",{className:"current-event__upload-section",children:[e.jsx("h5",{className:"current-event__section-title",children:"previous events"}),n.length>0?n.map(s=>{var u;const v=(u=s==null?void 0:s.url)==null?void 0:u.endsWith(".mp3"),x=(s==null?void 0:s.type)==="video",i=f.find(j=>j.id===s.eventId),r=g.find(j=>j.id===s.artTypeId);return e.jsxs("div",{className:"art-card",children:[e.jsxs("div",{className:"art-card__info",children:[e.jsx("p",{className:"art-card__event-name",children:i==null?void 0:i.name}),e.jsx("p",{className:"art-card__type",children:r==null?void 0:r.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"art-card__media",children:v?e.jsx("audio",{controls:!0,className:"art-card__audio",children:e.jsx("source",{src:s.url,type:"audio/mpeg"})}):x?e.jsx("video",{controls:!0,width:"100%",className:"art-card__video",children:e.jsx("source",{src:s.url,type:"video/mp4"})}):e.jsx("img",{src:s.url,alt:s.title,width:"300",className:"art-card__image"})}),e.jsxs("div",{className:"art-card__details",children:[e.jsx("h3",{className:"art-card__title",children:s.title}),e.jsx("p",{className:"art-card__description",children:s.description}),e.jsx(c,{to:`/art-detail/${s.id}`,className:"art-card__detail-link",children:"detail"})]})]})]},s.id)}):e.jsx("p",{className:"current-event__empty-msg",children:"You have no artworks in previous events"})]})]})]}),h&&e.jsx("div",{className:"popup",children:e.jsxs("div",{className:"popup__inner",children:[e.jsx("div",{className:"popup__message",children:e.jsx("p",{className:"popup__question",children:"Are you sure you want to delete this artwork?"})}),e.jsxs("div",{className:"popup__buttons",children:[e.jsx(M,{method:"post",action:`/destroy-art/${w}`,onSubmit:()=>_(!1),children:e.jsx("button",{type:"submit",className:"popup__btn popup__btn--yes",children:"Yes, Delete"})}),e.jsx("button",{type:"button",className:"popup__btn popup__btn--no",onClick:()=>_(!1),children:"No, keep"})]})]})})]})});export{G as clientLoader,z as default};

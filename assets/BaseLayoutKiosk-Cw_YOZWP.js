import{w as j}from"./with-props-sCgrmHZr.js";import{j as t}from"./jsx-runtime-D_zvdyIk.js";/* empty css              */import{a as o,q as p,x as S,O as _}from"./chunk-DQRVZFIR-DIhVU3QH.js";import{b as N,g as k,a as T}from"./events-PY5RSDSP.js";import"./supabase-gzL5jvvo.js";const E=({secondsLeft:s,shown:n})=>{const r=o.useRef(null);return o.useEffect(()=>{const a=r.current,e=a.getContext("2d"),h=s/10,i=1.5*Math.PI,c=i+2*Math.PI*h;e.clearRect(0,0,a.width,a.height),e.beginPath(),e.arc(28,28,20,i,c),e.lineWidth=12,e.strokeStyle="#E8E0D3",e.stroke()},[s]),t.jsx("div",{className:n?"touch-count-down":"visually-hidden",children:t.jsxs("div",{className:"touch-count-down__content",children:[t.jsxs("div",{className:"touch-count-down__counter",children:[t.jsx("canvas",{ref:r,width:"56",height:"56",className:"touch-count-down__progress"}),t.jsx("div",{className:"touch-count-down__counter-hidder"}),t.jsx("p",{className:"touch-count-down__counter-value",children:s})]}),t.jsxs("div",{className:"touch-count-down__text",children:[t.jsx("p",{className:"touch-count-down__head",children:"Touch"}),t.jsx("p",{className:"touch-count-down__subhead",children:"To keep discovering!"})]})]})})},b="/integration4/assets/intro-photo-BfMX_qeZ.png",v=({deg:s,date:n})=>t.jsxs("section",{style:{rotate:`${s}deg`},className:`banner banner--${s}`,children:[t.jsx("h2",{className:"visually-hidden",children:"Banner"}),t.jsxs("p",{children:["Artwork Voting - available until ",n," • Artwork Voting - available until ",n," • Artwork Voting - available until ",n," • Artwork Voting - available until ",n," • "]})]}),y=({handleUnlock:s,endDate:n})=>{const r=o.useRef(0),[a,e]=o.useState(0),[h,i]=o.useState(!1),c=l=>{r.current=l.touches[0].clientY},u=l=>{const m=l.touches[0].clientY-r.current;m<0&&e(m)},d=()=>{a<-100?(i(!0),e(-window.innerHeight),setTimeout(()=>s(),500)):e(0)};return t.jsxs("section",{className:"start-screen",onTouchStart:c,onTouchMove:u,onTouchEnd:d,style:{transform:`translateY(${a}px)`,transition:h||a===0?"transform 0.5s ease-out":"none"},children:[t.jsx("h1",{className:"visually-hidden",children:"StartScreen"}),t.jsx("img",{src:b,alt:""}),t.jsxs("div",{className:"start-screen__content",children:[t.jsx(v,{deg:-3,date:n}),t.jsx(v,{deg:4,date:n}),t.jsxs("div",{className:"start-screen__cta",children:[t.jsx("p",{children:"Don’t hesitate, SWIPE UP!"}),t.jsx("button",{onClick:s,children:t.jsx("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M16.9579 0.500003L0.499992 47.5L16.0084 47.5L24.0791 9.42582L32.1498 47.5L47.5 47.5L31.2003 0.500005L16.9579 0.500003Z",fill:"black"})})})]})]})]})};async function Y(){const s=await N();return{endDate:await k(await T(s.startDate))}}const A=({loaderData:s})=>{const{endDate:n}=s,r=p(),a=S(),[e,h]=o.useState(!1),[i,c]=o.useState(0),[u,d]=o.useState(!1),[l,m]=o.useState(10);o.useEffect(()=>{const g=setInterval(()=>{e&&(u?(m(x=>x-1),l<=1&&(m(10),d(!1),h(!1),a("/kiosk/home"))):(c(x=>x+1),i===9e7&&(d(!0),c(0),m(10))))},1e3);return()=>clearInterval(g)},[i,u,l,e]);const w=()=>{c(0),d(!1)},f=()=>{h(!0),c(0),d(!1)};return t.jsxs("main",{className:r.pathname.slice(1).split("/")[1],style:{width:"100vw",height:"100dvh",overflow:"hidden"},onTouchStart:w,onClick:w,children:[t.jsx(_,{}),u&&t.jsx(E,{secondsLeft:l,shown:u}),!e&&t.jsx(y,{handleUnlock:f,endDate:n})]})},B=j(A);export{Y as clientLoader,B as default};

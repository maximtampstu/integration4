import{w as g}from"./with-props-sCgrmHZr.js";import{j as t}from"./jsx-runtime-D_zvdyIk.js";/* empty css              */import{a,x as j,O as p}from"./chunk-DQRVZFIR-DIhVU3QH.js";import{b as S,g as _,a as k}from"./events-PY5RSDSP.js";import"./supabase-gzL5jvvo.js";const N=({secondsLeft:e,shown:s})=>{const i=a.useRef(null);return a.useEffect(()=>{const o=i.current,n=o.getContext("2d"),h=e/10,c=1.5*Math.PI,r=c+2*Math.PI*h;n.clearRect(0,0,o.width,o.height),n.beginPath(),n.arc(28,28,20,c,r),n.lineWidth=12,n.strokeStyle="#E8E0D3",n.stroke()},[e]),t.jsx("div",{className:s?"touch-count-down":"visually-hidden",children:t.jsxs("div",{className:"touch-count-down__content",children:[t.jsxs("div",{className:"touch-count-down__counter",children:[t.jsx("canvas",{ref:i,width:"56",height:"56",className:"touch-count-down__progress"}),t.jsx("div",{className:"touch-count-down__counter-hidder"}),t.jsx("p",{className:"touch-count-down__counter-value",children:e})]}),t.jsxs("div",{className:"touch-count-down__text",children:[t.jsx("p",{className:"touch-count-down__head",children:"Touch"}),t.jsx("p",{className:"touch-count-down__subhead",children:"To keep discovering!"})]})]})})},T="/integration4/assets/intro-photo-BfMX_qeZ.png",m=({deg:e,date:s})=>t.jsxs("section",{style:{rotate:`${e}deg`},className:`banner banner--${e}`,children:[t.jsx("h2",{className:"visually-hidden",children:"Banner"}),t.jsxs("p",{children:["Artwork Voting - available until ",s," • Artwork Voting - available until ",s," • Artwork Voting - available until ",s," • Artwork Voting - available until ",s," • "]})]}),E=({handleUnlock:e,endDate:s})=>{const i=a.useRef(0),[o,n]=a.useState(0),[h,c]=a.useState(!1),r=l=>{i.current=l.touches[0].clientY},u=l=>{const x=l.touches[0].clientY-i.current;x<0&&n(x)},d=()=>{o<-100?(c(!0),n(-window.innerHeight),setTimeout(()=>e(),500)):n(0)};return t.jsxs("section",{className:"start-screen",onTouchStart:r,onTouchMove:u,onTouchEnd:d,style:{transform:`translateY(${o}px)`,transition:h||o===0?"transform 0.5s ease-out":"none"},children:[t.jsx("h1",{className:"visually-hidden",children:"StartScreen"}),t.jsx("img",{src:T,alt:""}),t.jsxs("div",{className:"start-screen__content",children:[t.jsx(m,{deg:-3,date:s}),t.jsx(m,{deg:4,date:s}),t.jsxs("div",{className:"start-screen__cta",children:[t.jsx("p",{children:"Don’t hesitate, SWIPE UP!"}),t.jsx("button",{onClick:e,children:t.jsx("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M16.9579 0.500003L0.499992 47.5L16.0084 47.5L24.0791 9.42582L32.1498 47.5L47.5 47.5L31.2003 0.500005L16.9579 0.500003Z",fill:"black"})})})]})]})]})};async function M(){const e=await S();return{endDate:await _(await k(e.startDate))}}const b=({loaderData:e})=>{const{endDate:s}=e,i=j(),[o,n]=a.useState(!1),[h,c]=a.useState(0),[r,u]=a.useState(!1),[d,l]=a.useState(10);a.useEffect(()=>{const f=setInterval(()=>{o&&(r?(l(w=>w-1),d<=1&&(l(10),u(!1),n(!1),i("/kiosk/home"))):(c(w=>w+1),h===90&&(u(!0),c(0),l(10))))},1e3);return()=>clearInterval(f)},[h,r,d,o]);const x=()=>{c(0),u(!1)},v=()=>{n(!0),c(0),u(!1)};return t.jsxs("main",{style:{width:"100vw",height:"100dvh",overflow:"hidden"},onTouchStart:x,onClick:x,children:[t.jsx(p,{}),r&&t.jsx(N,{secondsLeft:d,shown:r}),!o&&t.jsx(E,{handleUnlock:v,endDate:s})]})},P=g(b);export{M as clientLoader,P as default};

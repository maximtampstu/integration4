import{w as i}from"./with-props-DYauBgyy.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{x as m,L as d,t as c}from"./chunk-DQRVZFIR-CNgL96Wu.js";import{a as h,g as l,b as u}from"./theme-CAjgwh2d.js";import{a as p}from"./users-BpYIlJRP.js";import"./supabase-BcYPN25z.js";async function g(){const a=await p(),t=await h(),s=(await l()).some(n=>n.userEmail===a.email);return{votableThemes:t,currentUser:a,hasAlreadyVoted:s}}async function y({request:a}){const t=await a.formData(),o=Number(t.get("themeId")),s=t.get("email");return await u(o,s),{themeId:o}}const x=({loaderData:a})=>{const{votableThemes:t,currentUser:o,hasAlreadyVoted:s}=a,n=m();return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Vote Theme"}),e.jsx(d,{to:"/participate",children:"Back"}),n?e.jsxs("p",{children:["Thanks for voting. You voted for ",e.jsx("b",{children:t.find(r=>r.id===n.themeId).name})]}):s?e.jsx("p",{children:"You already have voted"}):e.jsxs(c,{method:"POST",children:[e.jsx("input",{type:"hidden",name:"email",value:o.email}),t.map(r=>e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"themeId",value:r.id,required:!0}),r.name]},r.id)),e.jsx("button",{type:"submit",children:"Vote"})]})]})},w=i(x);export{y as clientAction,g as clientLoader,w as default};

import{w as j}from"./with-props-sCgrmHZr.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{d as v,e as f}from"./art-AYjM_fPO.js";import{a as u,L as p,t as y}from"./chunk-DQRVZFIR-DIhVU3QH.js";import{b as w}from"./events-PY5RSDSP.js";import{a as g}from"./users-Dw2hlNRA.js";import"./supabase-gzL5jvvo.js";async function D(){const r=await w(),n=await g(),i=await v(r.id,n.id),o=await f(r.id,n.id);return{currentEventArt:i,previousEventsArt:o}}const I=j(function({loaderData:n}){const{currentEventArt:i,previousEventsArt:o}=n,[a,c]=u.useState(!1),[h,m]=u.useState(""),x=t=>{t.preventDefault(),m(t.target.artId.value),c(!0)};return e.jsxs("main",{className:"current-event-page",children:[e.jsx("h1",{children:"Current Event Artworks"}),e.jsx("section",{children:i.length>0?i.map(t=>{var s;const d=(s=t==null?void 0:t.url)==null?void 0:s.endsWith(".mp3"),l=(t==null?void 0:t.type)==="video";return e.jsxs("div",{className:"art-card",children:[e.jsx("h3",{children:t.title}),d?e.jsx("audio",{controls:!0,children:e.jsx("source",{src:t.url,type:"audio/mpeg"})}):l?e.jsx("video",{controls:!0,width:"300",children:e.jsx("source",{src:t.url,type:"video/mp4"})}):e.jsx("img",{src:t.url,alt:t.title,width:"300"}),e.jsx("p",{children:t.description}),e.jsxs("form",{onSubmit:x,children:[e.jsx("input",{type:"hidden",name:"artId",value:t.id}),e.jsx("button",{type:"submit",className:"delete-button",children:"Delete"})]}),e.jsx(p,{to:`/edit-art/${t.id}`,className:"edit-button",children:"Edit"})]},t.id)}):e.jsx("p",{children:"No artworks in the current event."})}),e.jsx("h2",{children:"Other Artworks by You"}),e.jsx("section",{children:o.length>0?o.map(t=>{var s;const d=(s=t==null?void 0:t.url)==null?void 0:s.endsWith(".mp3"),l=(t==null?void 0:t.type)==="video";return e.jsxs("div",{className:"art-card",children:[e.jsx("h3",{children:t.title}),d?e.jsx("audio",{controls:!0,children:e.jsx("source",{src:t.url,type:"audio/mpeg"})}):l?e.jsx("video",{controls:!0,width:"300",children:e.jsx("source",{src:t.url,type:"video/mp4"})}):e.jsx("img",{src:t.url,alt:t.title,width:"300"}),e.jsx("p",{children:t.description})]},t.id)}):e.jsx("p",{children:"You have no artworks in other events."})}),e.jsx(p,{to:"/",children:"Back to Home"}),a&&e.jsx("div",{className:"confirmation-popup",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.75)",justifyContent:"center",alignItems:"center",display:"flex"},children:e.jsxs("div",{className:"confirmation-popup__content",style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",textAlign:"center",placeSelf:"center"},children:[e.jsx("p",{children:"Are you sure you want to delete this artwork?"}),e.jsx(y,{method:"post",action:`/destroy-art/${h}`,onSubmit:()=>c(!1),children:e.jsx("button",{type:"submit",children:"Yes, Delete"})}),e.jsx("button",{type:"button",onClick:()=>c(!1),children:"No, keep"})]})})]})});export{D as clientLoader,I as default};
